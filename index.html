<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=, initial-scale=1.0">
    <link rel="stylesheet" href="index.css">
    <title>Convertisseurs d'unités</title>
</head>
<body>
    <h1>CONVERTISSEURS D'UNITÉS</h1>
    <div class="containers"> 
        <div id="mini-container">
            <label>Sélection de la grandeur physique : </label>
            <select>
                <option>Température</option>
                <option>Distance</option>
                <option>Volume</option>
                <option>Masse</option>
                <option>Temps</option>
                <option>Date Byte</option>
            </select>
        </div>
    </div>
    <hr>
    <div class="containers">
        <div class="mini-container">
            <div class="container-saisie">
                <label>UNITÉ DE DÉPART</label>
                <input type="number" placeholder="Saisissez votre valeur">
            </div>
            <div class="container-unite">
                <label>Sélection de la grandeur physique : </label>
                <select id="grandeur1">
                    
                </select>
            </div>
        </div>
        <img id="fleche" src="images/flèche.png" alt="flèche">
        <div class="mini-container">
            <div class="container-saisie">
                <label>UNITÉ D'ARRIVÉE</label>
                <input type="number">
            </div>
            <div class="container-unite">
                <label>Sélection de la grandeur physique : </label>
                <select id="grandeur2">
                    
                </select>
            </div>
        </div>
    </div>
    <div class="containers">
        <div id="submit-container">
            <a id="button" href="#">Convertir</a>
            <a href="index.html">Rafraichir</a>
        </div>
    </div>
    <script>
        const unitesDisponibles = {
            Température: ["Celsius", "Fahrenheit", "Kelvin"],
            Distance: ["Kilomètres", "Mètres", "Centimètres", "Millimètres", "Micromètres", "Nanomètres", "Miles", "Pieds", "Pouces"],
            Volume: ["Litres", "Millilitres", "Gallons"],
            Masse: ["Grammes", "Kilogrammes", "Livres"],
            Temps: ["Secondes", "Minutes", "Heures"],
            "Date Byte": ["Bytes", "Kilobytes", "Megabytes", "Gigabytes"]
        };

        document.querySelector("select").addEventListener("change", function () {
            const grandeur = this.value;
            const selectUniteDepart = document.querySelector("#grandeur1");
            const selectUniteArrivee = document.querySelector("#grandeur2");

            selectUniteDepart.innerHTML = "";
            selectUniteArrivee.innerHTML = "";

            unitesDisponibles[grandeur].forEach(unite => {
                const optionDepart = document.createElement("option");
                const optionArrivee = document.createElement("option");

                optionDepart.textContent = unite;
                optionArrivee.textContent = unite;

                selectUniteDepart.appendChild(optionDepart);
                selectUniteArrivee.appendChild(optionArrivee);
            });
        });

        document.querySelector("#button").addEventListener("click", function (e) {
            e.preventDefault();

            const grandeur = document.querySelector("select").value;
            const uniteDepart = document.querySelector("#grandeur1").value;
            const uniteArriver = document.querySelector("#grandeur2").value;
            const valeur = parseFloat(document.querySelector(".container-saisie input").value);

            if (!valeur || isNaN(valeur)) {
                alert("Veuillez entrer une valeur valide.");
                return;
            }

            try {
                const resultat = conversion(grandeur, uniteDepart, uniteArriver, valeur);
                document.querySelectorAll(".container-saisie input")[1].value = resultat;
            } catch (error) {
                alert(error.message);
            }
        });

        function conversion(grandeur, uniteDepart, uniteArriver, valeur) {
            switch (grandeur) {
                case "Température":
                    return conversionTemp(valeur, uniteDepart, uniteArriver);
                case "Distance":
                    return conversionDist(valeur, uniteDepart, uniteArriver);
                case "Volume":
                    return conversionVol(valeur, uniteDepart, uniteArriver);
                case "Masse":
                    return conversionMasse(valeur, uniteDepart, uniteArriver);
                case "Temps":
                    return conversionTemps(valeur, uniteDepart, uniteArriver);
                case "Data Byte":
                    return conversionData(valeur, uniteDepart, uniteArriver);
                default:
                    throw new Error("Grandeur non supportée.");
            }
        }

        function conversionTemp(valeur, uniteDepart, uniteArriver) {
            if (uniteDepart === "Celsius" && uniteArriver === "Fahrenheit") {
                return (valeur * 9/5) + 32;
            } else if (uniteDepart === "Fahrenheit" && uniteArriver === "Celsius") {
                return (valeur - 32) * 5/9;
            } else if (uniteDepart === "Celsius" && uniteArriver === "Kelvin") {
                return valeur + 273.15;
            } else if (uniteDepart === "Kelvin" && uniteArriver === "Celsius") {
                return valeur - 273.15;
            } else if (uniteDepart === "Fahrenheit" && uniteArriver === "Kelvin") {
                return (valeur - 32) * 5/9 + 273.15;
            } else if (uniteDepart === "Kelvin" && uniteArriver === "Fahrenheit") {
                return (valeur - 273.15) * 9/5 + 32;
            } else {
                return valeur; 
            }
        }

        function conversionDist(valeur, uniteDepart, uniteArriver) {
            const mesures = {
                "Kilomètres": 1000,
                "Mètres": 1,
                "Centimètres": 0.01,
                "Millimètres": 0.001,
                "Micromètres": 0.000001,
                "Nanomètres": 0.000000001,
                "Miles": 1609.34,
                "Pieds": 0.3048,
                "Pouces": 0.0254
            };

            if (mesures[uniteDepart] && mesures[uniteArriver]) {
                return (valeur * mesures[uniteDepart]) / mesures[uniteArriver];
            } else {
                throw new Error("Conversion non supportée entre ces unités.");
            }
        }

        function conversionVol(valeur, uniteDepart, uniteArriver) {
            const volumes = {
                "Litres": 1,
                "Millilitres": 0.001,
                "Gallons": 3.78541
            };

            if (volumes[uniteDepart] && volumes[uniteArriver]) {
                return (valeur * volumes[uniteDepart]) / volumes[uniteArriver];
            } else {
                throw new Error("Conversion non supportée entre ces unités.");
            }
        }

        function conversionMasse(valeur, uniteDepart, uniteArriver) {
            const masses = {
                "Grammes": 1,
                "Kilogrammes": 1000,
                "Livres": 453.592
            };

            if (masses[uniteDepart] && masses[uniteArriver]) {
                return (valeur * masses[uniteDepart]) / masses[uniteArriver];
            } else {
                throw new Error("Conversion non supportée entre ces unités.");
            }
        }

        function conversionTemps(valeur, uniteDepart, uniteArriver) {
            const temps = {
                "Secondes": 1,
                "Minutes": 60,
                "Heures": 3600
            };

            if (temps[uniteDepart] && temps[uniteArriver]) {
                return (valeur * temps[uniteDepart]) / temps[uniteArriver];
            } else {
                throw new Error("Conversion non supportée entre ces unités.");
            }
        }

        function conversionData(valeur, uniteDepart, uniteArriver) {
            const data = {
                "Bytes": 1,
                "Kilobytes": 1024,
                "Megabytes": 1048576,
                "Gigabytes": 1073741824
            };

            if (data[uniteDepart] && data[uniteArriver]) {
                return (valeur * data[uniteDepart]) / data[uniteArriver];
            } else {
                throw new Error("Conversion non supportée entre ces unités.");
            }
        }
    </script>
</body>
</html>